<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'head_links.html' %}
    <style>
        body {
            background-color: #222529;
        }
        .navbar-brand {
            margin-left: 4rem;
            font-size: 1.8rem;
        }
        .navbar-nav {
            margin-left: 2rem;
            font-size: 1.5rem;
        }
        .navbar-nav .nav-link {
            margin-left: 30px;
        }
        .disabled-text {
            pointer-events: none;
        }
        .icon-adjust {
            vertical-align: middle;
            position: relative;
            top: -2px;
        }
        li::marker {
            color: #2c3035;
        }
        .navbar-link2 {
            margin-right: 4rem;
        }
        .custom-box {
            border: 3px solid #727375; 
            padding: 20px;
            margin-bottom: 20px;
        }
        .custom-box .box-header {
            background-color: #727375; 
            color: white;
            padding: 10px;
            font-size: 1.25rem;
            text-align: center;
        }
        .custom-box .box-content {
            margin-top: 20px;
            padding: 10px;  
            background-color: #727375; 
            height: 130px;
            font-size: 20px;
            display: flex; 
            align-items: center;
        }
        .image-wrapper {
            width: 120px; /* Yuvarlak çerçeve genişliği */
            height: 120px; /* Yuvarlak çerçeve yüksekliği */
            border-radius: 50%; /* Yuvarlak yapar */
            overflow: hidden; /* Görüntünün dışarı taşmasını engeller */
            display: flex;
            align-items: center;
            justify-content: center; /* Görüntüyü merkezler */
            margin-left: 25px;
        }
        .image-wrapper img {
            width: 100px; /* Fotoğrafın genişliğini çerçeveye uydurur */
            height: 100px; /* Fotoğrafın yüksekliğini çerçeveye uydurur */
            object-fit: cover; /* Fotoğrafın alanı tamamen kaplamasını sağlar */
            object-position: center; /* Fotoğrafın ortasını gösterir */
        }
        .text-section {
            height: 110px;
            margin-left: 15px;
            display: flex;
            flex-direction: row; /* Yan yana hizalama */
            gap: 10px; /* Dikdörtgenler arasında boşluk */
            flex: 1; /* Kalan alanı kaplar */
        }
        .text-box {
            font-size: 15px; /* Yazı boyutu */
            background-color: #727375; /* Arka plan rengi */
            padding: 5px; 
            border-radius: 5px; /* Kenarları yuvarlat */
            flex: 1; /* Her bir kutu eşit genişlikte olur */
            text-align: center; /* Yazıları ortalar */
        }
        .text-box p {
            margin: 5px 0; /* Üst ve alt margin'i 5px'e düşürüyoruz */
        }
        .values-container {
            display: flex;
            justify-content: center;
            align-items: baseline;
        }
        .text-box .value{
            font-family: 'Lato', sans-serif;
            font-size: 50px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.812);
            margin: 12px; /* Ekstra margin kaldırıldı */
            line-height: 1; /* Satır yüksekliğini sıkılaştır */
        }
        .text-box .valuemin{
            font-family: 'Lato', sans-serif;
            font-size: 40px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.512);
            margin: 12px; /* Ekstra margin kaldırıldı */
            line-height: 1; /* Satır yüksekliğini sıkılaştır */
        }
        .text-box .value2{
            font-family: 'Lato', sans-serif;
            font-size: 35px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.812);
            margin: 20px; /* Ekstra margin kaldırıldı */
            line-height: 1; /* Satır yüksekliğini sıkılaştır */
        }
        .text-box img {
            margin: 10px; /* Ekstra margin kaldırıldı */
            line-height: 1; /* Satır yüksekliğini sıkılaştır */
            transition: transform 0.5s ease; /* Dönüşümleri 0.5 saniyede yapar */
            transform-origin: 50% 50%; /* Dönüşümün merkezini belirler */
        }
        .custom-box .box-content-2 {
            margin-top: 2px;
            padding: 10px;
            background-color: #727375; 
            height: 130px;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .custom-box .box-content-3 {
            margin-top: 20px;
            padding: 0px;
            background-color: #727375; 
            height: 200px;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .custom-box .box-content-2 img{
            max-width: 40px;
            margin-bottom: 10px;
        }
        .days {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .day {
            flex: 1;
            height: 200px;
            text-align: center;
            padding: 10px;
            color : rgba(255, 255, 255, 0.812);
            background-color: #727375; /* Butonların arka plan rengi */
            border: none;
            cursor: pointer; /* Buton üzerinde fare imlecini göster */
            font-size: 16px; /* Buton yazı boyutu */
        }
        .day img {
            margin-top: 20px;
            margin-bottom: 20px;
            width: 50px;
            height: 50px;
        }
        .temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .temperature {
            font-size: 20px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.812);
        }
        .mintemp {
            font-size: 15px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.512);
        }
        .day:hover {
            background-color: #5d5e5e; /* Buton üzerine gelindiğinde arka plan rengi */
        }
        .day:active {
            background-color: #727375; /* Butona tıklandığında arka plan rengi */
        }
    </style>
</head>

<body>
    {% include 'body_links.html' %}

    {% include 'navbar.html' %}

      <div class="container" style="margin-top: 40px;"></div>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="custom-box">
                    <div class="box-header">
                      <a><img src="{{ url_for('static', filename='images/ch.png') }}" class="d-inline-block align-text-bottom" width="25" height="25">  Basel Hava Durumu</a>
                    </div>
                    <div class="box-content">
                      <div class="image-wrapper">
                        <img id="weather-image" src="{{ url_for('static', filename='images/severe-weather.png') }}" alt="admin" class="d-inline-block"> 
                      </div>
                      <div class="text-section">
                        <div class="text-box">
                            <p>Sıcaklık (°C)</p>
                            <div class="values-container">
                              <p id='temp' class="value">{{df_sicaklikmax_dict[0]['yhat_upper']}}</p>
                              <p id='mintemp' class="valuemin">{{df_sicaklikmin_dict[0]['yhat_lower']}}</p>
                            </div>
                        </div>
                        <div class="text-box">
                            <p>Nem (%)</p>
                            <p id='humidity' class="value">{{df_nem_dict[0]['yhat']}}</p>
                        </div>
                        <div class="text-box">
                            <p>Bulut Yoğunluğu (%)</p>
                            <p id='cloud' class="value">{{df_bulut_dict[0]['yhat']}}</p>
                        </div>
                      </div>
                    </div>
                    <div class="box-content-2">
                      <div class="text-section">
                        <div class="text-box">
                            <p>Basınç (hPa)</p>
                            <p id='pressure' class="value2"> {{df_basinc_dict[0]['yhat']}} </p>
                        </div>
                        <div class="text-box">
                            <p>Yağmur Miktarı (%)</p>
                            <p id='rain' class="value2">{{df_yagmur_dict[0]['yhat']}}</p>
                        </div>
                        <div class="text-box">
                            <p>Kar Miktarı (%)</p>
                            <p id='snow' class="value2">{{df_kar_dict[0]['yhat']}}</p>
                        </div>
                        <div class="text-box">
                            <p>Rüzgar Hızı (km/h)</p>
                            <p id="wind-speed" class="value2">{{df_ruzgarhizi_dict[0]['yhat']}}</p>
                        </div>
                        <div class="text-box">
                            <p>Rüzgar Yönü</p>
                            <img id="wind-direction" src="{{ url_for('static', filename='images/arrow-up.png') }}" alt="admin" class="img-fluid">
                        </div>
                      </div>
                  </div>
                  <div class="box-content-3">
                    <div class="days">
                      <button class="day" onclick="changeWeather(0, 'arrow-up.png')">{{df_basinc_dict[0]['ds']}}<br>
                        <img id="button-image0" src="{{ url_for('static', filename='images/sunny.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[0]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[0]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(1, 'arrow-up.png')">{{df_basinc_dict[1]['ds']}}<br>
                        <img id="button-image1" src="{{ url_for('static', filename='images/sunny-cloud.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[1]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[1]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(2, 'arrow-up.png')">{{df_basinc_dict[2]['ds']}}<br>
                        <img id="button-image2" src="{{ url_for('static', filename='images/cloudy.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[2]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[2]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(3, 'arrow-up.png')">{{df_basinc_dict[3]['ds']}}<br>
                        <img id="button-image3" src="{{ url_for('static', filename='images/rainy.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[3]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[3]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(4, 'arrow-up.png')">{{df_basinc_dict[4]['ds']}}<br>
                        <img id="button-image4" src="{{ url_for('static', filename='images/snowy.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[4]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[4]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(5, 'arrow-up.png')">{{df_basinc_dict[5]['ds']}}<br>
                        <img id="button-image5" src="{{ url_for('static', filename='images/logo.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[5]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[5]['yhat_lower']}}</span>
                        </div>
                      </button>
                      <button class="day" onclick="changeWeather(6, 'arrow-up.png')">{{df_basinc_dict[6]['ds']}}<br>
                        <img id="button-image6" src="{{ url_for('static', filename='images/logo.png') }}" alt="admin" class="img-fluid">
                        <div class="temp-container">
                          <span class="temperature">{{df_sicaklikmax_dict[6]['yhat_upper']}}</span>
                          <span class="mintemp">{{df_sicaklikmin_dict[6]['yhat_lower']}}</span>
                        </div>
                      </button>
                    </div>
                  </div>
                </div>
            </div>
      </div>
    </div>
    <script>
      var yhat = {{ df_ruzgaryonu_dict[0]['yhat'] }};
  
      function rotateWindDirection(angle) {
          var img = document.getElementById('wind-direction');
          img.classList.add('rotated');
          img.style.transform = 'rotate(' + angle + 'deg)';
      }
      rotateWindDirection(yhat);
  </script>

    <script>
      const weatherData = {
          sicaklikmax: {{ df_sicaklikmax_dict | tojson }},
          sicaklikmin: {{ df_sicaklikmin_dict | tojson }},
          nem: {{ df_nem_dict | tojson }},
          bulut: {{ df_bulut_dict | tojson }},
          basinc: {{ df_basinc_dict | tojson }},
          yagmur: {{ df_yagmur_dict | tojson }},
          kar: {{ df_kar_dict | tojson }},
          ruzgarhizi: {{ df_ruzgarhizi_dict | tojson }},
          ruzgaryonu: {{ df_ruzgaryonu_dict | tojson }}
      };

      function changeWeather(i, windDirection) {
          document.getElementById('weather-image').src = "{{ url_for('static', filename='images/') }}" + determinePhoto(i);

          document.getElementById('temp').textContent = weatherData.sicaklikmax[i].yhat_upper;
          document.getElementById('mintemp').textContent = weatherData.sicaklikmin[i].yhat_lower;
          document.getElementById('humidity').textContent = weatherData.nem[i].yhat;
          document.getElementById('cloud').textContent = weatherData.bulut[i].yhat;
          document.getElementById('pressure').textContent = weatherData.basinc[i].yhat;
          document.getElementById('rain').textContent = weatherData.yagmur[i].yhat;
          document.getElementById('snow').textContent = weatherData.kar[i].yhat;
          document.getElementById('wind-speed').textContent = weatherData.ruzgarhizi[i].yhat;
          var windDirectionElement = document.getElementById('wind-direction'); 
          windDirectionElement.style.transform = 'rotate(' + weatherData.ruzgaryonu[i].yhat + 'deg)';
          windDirectionElement.style.transformOrigin = '50% 50%';
      }

      function determinePhoto(i){
          if (weatherData.kar[i].yhat >= 2) {
              return 'snowy.png';
          } else if (weatherData.yagmur[i].yhat >= 4) {
              return 'rainy.png';
          } else if (weatherData.bulut[i].yhat >= 66) {
              return 'cloudy.png';
          } else if (weatherData.bulut[i].yhat > 33) {
              return 'sunny-cloud.png';
          } else {
              return 'rainy.png';
          }
      }

      function updateWeatherImage() {
            var imageElement = document.getElementById('weather-image');
            var photo = determinePhoto(0);

            imageElement.src = "{{ url_for('static', filename='images/') }}" + photo;
        }

      function updateButtonImage(i){
        if (i == 0) {
          var imageElement = document.getElementById('button-image0');
        } else if (i == 1) {
          var imageElement = document.getElementById('button-image1');
        } else if (i == 2) {
          var imageElement = document.getElementById('button-image2');
        } else if (i == 3) {
          var imageElement = document.getElementById('button-image3');
        } else if (i == 4) {
          var imageElement = document.getElementById('button-image4');
        } else if (i == 5) {
          var imageElement = document.getElementById('button-image5');
        } else if (i == 6) {
          var imageElement = document.getElementById('button-image6');
        }
            var photo = determinePhoto(i);

            imageElement.src = "{{ url_for('static', filename='images/') }}" + photo;
      }

        window.onload = function() {
            updateWeatherImage();
            updateButtonImage(0);
            updateButtonImage(1);
            updateButtonImage(2);
            updateButtonImage(3);
            updateButtonImage(4);
            updateButtonImage(5);
            updateButtonImage(6);
        };
  </script>

  
</body>
</html>